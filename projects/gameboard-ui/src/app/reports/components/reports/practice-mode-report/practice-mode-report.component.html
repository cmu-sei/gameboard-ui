<div class="practice-mode-report-component">
    <app-report-parameters-container>
        <app-multi-select label="Series" name="series" ngDefaultControl [options]="series$ | async"
            [(ngModel)]="selectedParameters.series"></app-multi-select>
        <app-multi-select label="Tracks" name="tracks" ngDefaultControl [options]="tracks$ | async"
            [(ngModel)]="selectedParameters.tracks"></app-multi-select>
        <app-multi-select label="Seasons" name="seasons" ngDefaultControl [options]="seasons$ | async"
            [(ngModel)]="selectedParameters.seasons"></app-multi-select>
        <app-multi-select label="Games" name="games" ngDefaultControl [options]="games$ | async"
            [(ngModel)]="selectedParameters.games" [itemTemplate]="multiSelectGame" [value]="getGameValue"
            [getSearchText]="getGameSearchText"></app-multi-select>
        <app-multi-select label="Sponsors" name="sponsors" ngDefaultControl [options]="sponsors$ | async"
            [(ngModel)]="selectedParameters.sponsors" [itemTemplate]="multiSelectSponsor"
            [getSearchText]="getSponsorSearchText" [value]="getSponsorValue"></app-multi-select>
        <app-parameter-date-range label="Practice Session Date" [(ngModel)]="selectedParameters.practiceDate"
            ngDefaultControl></app-parameter-date-range>
    </app-report-parameters-container>
</div>

<div class="report-body mt-5">
    <tabset>
        <tab heading="By Player" id="tab-by-player" (selectTab)="handleTabSelected('by-player')" #byPlayer>
            <app-practice-mode-report-by-user *ngIf="selectedTab == 'by-player'"
                [parameters]="selectedParameters"></app-practice-mode-report-by-user>
        </tab>

        <tab heading="By Challenge" id="tab-by-challenge" (selectTab)="handleTabSelected('by-challenge')" #byChallenge>
            <app-practice-mode-report-by-challenge *ngIf="selectedTab == 'by-challenge'"
                [parameters]="selectedParameters"></app-practice-mode-report-by-challenge>
        </tab>

        <tab heading="Players: Practice vs. Competitive" id="tab-prac-v-comp"
            (selectTab)="handleTabSelected('by-challenge')" #pracVComp>
            <app-practice-mode-report-prac-vs-comp
                *ngIf="selectedTab == 'prac-vs-comp'"></app-practice-mode-report-prac-vs-comp>
        </tab>
    </tabset>
</div>

<ng-template #loading>
    <div class="page-height d-flex flex-column align-items-center justify-content-center">
        <app-spinner>Loading the report...</app-spinner>
    </div>
</ng-template>

<ng-template #multiSelectGame let-option>
    {{ option.name }}
</ng-template>


<ng-template #multiSelectSponsor let-option>
    {{ option.name }}
</ng-template>
