<!-- Copyright 2021 Carnegie Mellon University. All Rights Reserved. -->
<!-- Released under a MIT (SEI)-style license. See LICENSE.md in the project root for license information. -->

<ng-container *ngIf="team$ | async as team; else loading">

  <div class="form-group">
    <label class="mb-0" for="reason-input">Extend Session</label>
    <div class="input-group">
      <input id="reason-input" class="form-control" type="text" [(ngModel)]="team.sessionEnd">
      <div class="input-group-append">
        <button class="btn btn-outline-info" (click)="extend(team)">
          <span>Extend</span>
        </button>
      </div>
    </div>
    <small></small>
  </div>

  <app-error-div [errors]="errors"></app-error-div>

  <app-announce [teamId]="team.teamId"></app-announce>

  <div class="yaml-container">
    <button class="btn btn-info btn-sm" (click)="toggleRawView(!showRaw)">
      <fa-icon [icon]="faInfo"></fa-icon>
      <span>Data</span>
    </button>

    <ng-template *ngIf="isLoadingChallenges">
      <div class="text-center">
        <app-spinner></app-spinner>
      </div>
    </ng-template>
    <app-yaml-block *ngIf="showRaw && !isLoadingChallenges" [source]="team"></app-yaml-block>
  </div>
</ng-container>

<ng-template #loading>
  <div class="text-center">
    <app-spinner></app-spinner>
  </div>
</ng-template>