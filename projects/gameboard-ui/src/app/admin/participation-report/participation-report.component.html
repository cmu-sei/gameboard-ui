<!-- Copyright 2021 Carnegie Mellon University. All Rights Reserved. -->
<!-- Released under a MIT (SEI)-style license. See LICENSE.md in the project root for license information. -->

<a class="btn btn-link" routerLink="../">
    <fa-icon [icon]="faArrowLeft"></fa-icon>
    <span>Back</span>
  </a>
  
  <h4>Participation Reports</h4>

  <div class="container table-dark border mb-4">
  <div class="row">
    <div class="col-2 p-2 font-weight-bold" *ngIf="series">
      <div>
        <button class="btn btn-outline-info btn-sm mx-1" (click)="downloadSeriesReport()">Export Series Report to CSV</button>
      </div>
    </div>
    <div class="col-2 p-2 font-weight-bold" *ngIf="tracks">
      <div>
        <button class="btn btn-outline-info btn-sm mx-1" (click)="downloadTrackReport()">Export Track Report to CSV</button>
      </div>
    </div>
    <div class="col-2 p-2 font-weight-bold" *ngIf="seasons">
      <div>
        <button class="btn btn-outline-info btn-sm mx-1" (click)="downloadSeasonReport()">Export Season Report to CSV</button>
      </div>
    </div>
    <div class="col-2 p-2 font-weight-bold" *ngIf="divisions">
      <div>
        <button class="btn btn-outline-info btn-sm mx-1" (click)="downloadDivisionReport()">Export Division Report to CSV</button>
      </div>
    </div>
    <div class="col-2 p-2 font-weight-bold" *ngIf="modes">
      <div>
        <button class="btn btn-outline-info btn-sm mx-1" (click)="downloadModeReport()">Export Mode Report to CSV</button>
      </div>
    </div>
    <div class="col-2 p-2 front-weight-bold" *ngIf="correlations">
      <div>
        <button class="btn btn-outline-info btn-sm mx-1" (click)="downloadCorrelationReport()">Export Correlation Report to CSV</button>
      </div>
    </div>
  </div>
</div>

<h5 class="pt-5 border-top">Series</h5>
<div class="container pt-4" *ngIf="series; else loading">
  <div class="row border-top p-3">
    <div class="col-3 font-weight-bold">Series</div>
    <div class="col-1 font-weight-bold">Game Count</div>
    <div class="col-1 font-weight-bold">Player Count</div>
    <div class="col-2 font-weight-bold">Players with Sessions</div>
    <div class="col-1 font-weight-bold">Team Count</div>
    <div class="col-2 font-weight-bold">Teams with Sessions</div>
    <div class="col-2 font-weight-bold">Challenges Deployed</div>
  </div>
  <div class="row border-top p-3" *ngFor="let s of series.stats">
    <div class="col-3">{{s.key}}</div>
    <div class="col-1">{{s.gameCount}}</div>
    <div class="col-1">{{s.playerCount}}</div>
    <div class="col-2">{{s.sessionPlayerCount}}</div>
    <div class="col-1">{{s.teamCount}}</div>
    <div class="col-2">{{s.sessionTeamCount}}</div>
    <div class="col-2">{{s.challengesDeployedCount}}</div>
  </div>
</div>

<h5 class="pt-5">Tracks</h5>
<div class="container pt-4" *ngIf="tracks; else loading">
  <div class="row border-top p-3">
    <div class="col-3 font-weight-bold">Series</div>
    <div class="col-1 font-weight-bold">Game Count</div>
    <div class="col-1 font-weight-bold">Player Count</div>
    <div class="col-2 font-weight-bold">Players with Sessions</div>
    <div class="col-1 font-weight-bold">Team Count</div>
    <div class="col-2 font-weight-bold">Teams with Sessions</div>
    <div class="col-2 font-weight-bold">Challenges Deployed</div>
  </div>
  <div class="row border-top p-3" *ngFor="let s of tracks.stats">
    <div class="col-3">{{s.key}}</div>
    <div class="col-1">{{s.gameCount}}</div>
    <div class="col-1">{{s.playerCount}}</div>
    <div class="col-2">{{s.sessionPlayerCount}}</div>
    <div class="col-1">{{s.teamCount}}</div>
    <div class="col-2">{{s.sessionTeamCount}}</div>
    <div class="col-2">{{s.challengesDeployedCount}}</div>
  </div>
</div>

<h5 class="pt-5">Seasons</h5>
<div class="container pt-4" *ngIf="seasons; else loading">
  <div class="row border-top p-3">
    <div class="col-3 font-weight-bold">Series</div>
    <div class="col-1 font-weight-bold">Game Count</div>
    <div class="col-1 font-weight-bold">Player Count</div>
    <div class="col-2 font-weight-bold">Players with Sessions</div>
    <div class="col-1 font-weight-bold">Team Count</div>
    <div class="col-2 font-weight-bold">Teams with Sessions</div>
    <div class="col-2 font-weight-bold">Challenges Deployed</div>
  </div>
  <div class="row border-top p-3" *ngFor="let s of seasons.stats">
    <div class="col-3">{{s.key}}</div>
    <div class="col-1">{{s.gameCount}}</div>
    <div class="col-1">{{s.playerCount}}</div>
    <div class="col-2">{{s.sessionPlayerCount}}</div>
    <div class="col-1">{{s.teamCount}}</div>
    <div class="col-2">{{s.sessionTeamCount}}</div>
    <div class="col-2">{{s.challengesDeployedCount}}</div>
  </div>
</div>

<h5 class="pt-5">Divisions</h5>
<div class="container pt-4" *ngIf="divisions; else loading">
  <div class="row border-top p-3">
    <div class="col-3 font-weight-bold">Series</div>
    <div class="col-1 font-weight-bold">Game Count</div>
    <div class="col-1 font-weight-bold">Player Count</div>
    <div class="col-2 font-weight-bold">Players with Sessions</div>
    <div class="col-1 font-weight-bold">Team Count</div>
    <div class="col-2 font-weight-bold">Teams with Sessions</div>
    <div class="col-2 font-weight-bold">Challenges Deployed</div>
  </div>
  <div class="row border-top p-3" *ngFor="let s of divisions.stats">
    <div class="col-3">{{s.key}}</div>
    <div class="col-1">{{s.gameCount}}</div>
    <div class="col-1">{{s.playerCount}}</div>
    <div class="col-2">{{s.sessionPlayerCount}}</div>
    <div class="col-1">{{s.teamCount}}</div>
    <div class="col-2">{{s.sessionTeamCount}}</div>
    <div class="col-2">{{s.challengesDeployedCount}}</div>
  </div>
</div>

<h5 class="pt-5">Modes</h5>
<div class="container pt-4" *ngIf="modes; else loading">
  <div class="row border-top p-3">
    <div class="col-3 font-weight-bold">Series</div>
    <div class="col-1 font-weight-bold">Game Count</div>
    <div class="col-1 font-weight-bold">Player Count</div>
    <div class="col-2 font-weight-bold">Players with Sessions</div>
    <div class="col-1 font-weight-bold">Team Count</div>
    <div class="col-2 font-weight-bold">Teams with Sessions</div>
    <div class="col-2 font-weight-bold">Challenges Deployed</div>
  </div>
  <div class="row border-top p-3" *ngFor="let s of modes.stats">
    <div class="col-3">{{s.key}}</div>
    <div class="col-1">{{s.gameCount}}</div>
    <div class="col-1">{{s.playerCount}}</div>
    <div class="col-2">{{s.sessionPlayerCount}}</div>
    <div class="col-1">{{s.teamCount}}</div>
    <div class="col-2">{{s.sessionTeamCount}}</div>
    <div class="col-2">{{s.challengesDeployedCount}}</div>
  </div>
</div>

<h5 class="pt-5">Correlations</h5>
<div class="container pt-4" *ngIf="correlations; else loading">
  <div class="row border-top p-3">
    <div class="col-6 font-weight-bold">Game Count</div>
    <div class="col-6 font-weight-bold">Player Count</div>
  </div>
  <div class="row border-top p-3" *ngFor="let s of correlations.stats">
    <div class="col-6">{{s.gameCount}}</div>
    <div class="col-6">{{s.userCount}}</div>
  </div>
</div>

<ng-template #loading>
  <div class="text-center">
    <app-spinner></app-spinner>
  </div>
</ng-template>
