<table *ngIf="gameData" class="table table-striped table-hover gameboard-table w-100">
    <col class="width-5">
    <col>
    <col>
    <col>
    <col>

    <thead class="thead-light">
        <tr class="headers">
            <th scope="col"></th>
            <th scope="col"> {{ gameData.game.isTeamGame ? "Team" : "Player" }} </th>
            <th scope="col">Challenge Performance</th>
            <th scope="col" class="text-center tooltipped-column-header" [tooltip]="cumulativeTimeTooltip">
                <span class="tooltipped-column-header">Cumulative Time</span>
            </th>
            <th scope="col" class="text-center">Score</th>
        </tr>
    </thead>

    <tbody>
        <tr *ngFor="let teamScore of gameData.teams" class="data-row cursor-pointer"
            (click)="handleRowClick(gameData.game, teamScore)">
            <td>
                <div class="team-rank d-flex flex-column justify-content-center align-items-center">
                    {{teamScore.rank}}
                </div>
            </td>
            <td>
                <div class="team-container d-flex align-items-center">
                    <ng-container *ngIf="!gameData.game.isTeamGame">
                        <app-player-avatar *ngIf="!gameData.game.isTeamGame" [player]="teamScore.players[0]"
                            class="mr-2"></app-player-avatar>

                        <span class="player-name">
                            {{teamScore.players[0].name}}
                        </span>
                    </ng-container>

                    <div *ngIf="gameData.game.isTeamGame" class="team-names-container ml-2">
                        <h5 class="team-name m-0">{{teamScore.team.name}}</h5>
                        <ul class="player-names-list d-flex mt-2">
                            <li *ngFor="let player of teamScore.players" class="mr-2">
                                <app-player-avatar [player]="player" [showSponsorTooltip]="false" size="tiny"
                                    [tooltip]="player.name + ' // ' + player.sponsor.name"
                                    placement="bottom"></app-player-avatar>
                            </li>
                        </ul>
                    </div>
                </div>
            </td>
            <td>
                <div class="challenge-count"
                    *ngIf="teamScore.challenges | teamChallengeScoresToChallengeResultTypeCount:'success'">
                    <span class="text-success">{{ teamScore.challenges |
                        teamChallengeScoresToChallengeResultTypeCount:"success" }}</span>
                    <span class="challenge-count-desc"> complete</span>
                </div>

                <div class="challenge-count"
                    *ngIf="teamScore.challenges | teamChallengeScoresToChallengeResultTypeCount:'partial'">
                    <span class="text-info">{{ teamScore.challenges |
                        teamChallengeScoresToChallengeResultTypeCount:"partial" }}</span>
                    <span class="challenge-count-desc"> partial</span>
                </div>

                <div class="challenge-count" *ngIf="teamScore.challenges.length < gameData.game.specs.length">
                    <span class="text-info">{{ gameData.game.specs.length - teamScore.challenges.length}}</span>
                    <span class="challenge-count-desc"> unattempted</span>
                </div>
            </td>
            <td>
                <div class="playtime challenge-count text-center">
                    {{ teamScore.totalTimeMs | msToDuration }}
                </div>
            </td>
            <td class="text-center">
                <span class="score text-center">{{ teamScore.overallScore.totalScore }}</span>
            </td>
        </tr>
    </tbody>
</table>

<ng-template #teamIsPlaying>

</ng-template>
