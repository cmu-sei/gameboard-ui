<div class="section-header" tabindex="0" (click)="toggle()">
  <fa-icon [icon]="show ? faCaretDown : faCaretRight" size="lg"></fa-icon>
  <span class="">
    <h3 class="d-inline">{{title}}</h3>
  </span>
</div>

<form #form="ngForm" [ngFormOptions]="{updateOn: 'change'}" [hidden]="!show" class="pop-light p-4 mt-4">
  <div *ngFor="let q of feedbackForm.questions; let i = index" class="mb-4">
    <label for="{{q.id}}">{{i+1}}. {{q.prompt}}</label>
    <textarea *ngIf="q.type == 'text'" rows="3" type="text" class="form-control" id="{{q.id}}" name="{{q.id}}"
      [(ngModel)]="q.answer" [disabled]="feedbackForm.submitted!"></textarea>
    <div *ngIf="q.type == 'radio'" class="">
      <small class="pr-2 text-dark">low</small>
      <div id="{{q.id}}" class="btn-group" btnRadioGroup name="{{q.id}}" tabindex="0" [(ngModel)]="q.answer"
        [disabled]="feedbackForm.submitted!">
        <label *ngFor="let i of q.options" class="btn btn-outline-dark btn-sm m-0" btnRadio="{{i}}">{{i}}
        </label>
      </div>
      <small class="pl-2 text-dark">high</small>
    </div>
  </div>

  <app-confirm-button btnClass="btn btn-sm btn-secondary" (confirm)="submit()" [disabled]="feedbackForm.submitted!">
    <fa-icon [icon]="faSubmit"></fa-icon>
    <span>{{feedbackForm.submitted ? "Submitted" : "Submit"}}</span>
  </app-confirm-button>
  <div class="mt-3 d-flex justify-content-between">
    <small class="">Responses cannot be changed after clicking submit.</small>
    <small class="">{{status}}</small>
  </div>
</form>

<p [hidden]="show || !feedbackForm.submitted" class="p-4 text-center">
  Thank you for submitting feedback!
</p>